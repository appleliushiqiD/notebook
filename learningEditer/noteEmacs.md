# 笔记：Emacs 编辑器

***查看中文指南 `M-x help-with-tutorial-spec-language` / `C-u C-h t`***

### 编辑器基础

- 页面  
  - 回显区 Echo area : 命令提示  
  - 状态栏 Mode line : 回显区上方一行  

- 状态栏 Mode line
  - 样式：`-:**- buffer position lineNum (Fundamental)`  
  - `**` : 表示内容被更改过，没有更改显示为 `--`  
  - `buffer` : 缓冲区名  
  - `position` : 光标所在全文中的位置，分别有 `Top` / `persent%` / `Bot` / `All`  
  - `lineNum` : 以 `L?` 显示光标所在行  
  - `(Fundamental)` : 当前缓冲区使用的**编辑模式**

- 编辑模式
  - 主模式 major ：一个缓冲区只有一个主模式  
  - 辅模式 minor ：一个缓冲区可以没有辅模式，或者一个或多个辅模式  

### 命令基础

- 基础  
  - `C-c`: 按住 `Ctrl` 同时按住 `c` 
  - `C-c x`:  使用 `Ctrl-c` 后按 `x`  

- 命令集拓展  
  - `C-x` : 字符拓展，命令后键入另一个字符或组合键  
  - `M-x` : 命令名拓展，命令后键入一个命令名  

- 程序  
  - `C-z` : 挂起 Emacs  
  - `C-x C-c` : 退出 Emacs  

#### `C`==`Ctrl`  

- `C-x C-c` : 退出 Emacs  
- `C-g` : 中断输入执行的命令或输入中的命令  
  - 退出 `Esc` 代替 `M-` 命令时，请连续按击 `Esc` 两次（ `Esc C-g` == `M-C-g` ）  
- `C-u ? <op>` : 重复命令 <op> ？次  
  - 对于 `C-v` / `M-v` 向下向上移动 `?` 行  
  - 对于 `C-l` 光标行移动到窗口第 ? 行  
  - 文本编辑内容会重复 ? 次  
- `C-x 1` : 只保留一个窗口（光标所在窗口）  

#### `M` == `Meta` / `Alt` / `Edit`  

- `M-c` == `Esc c` 

#### 光标移动

- 翻页（并不移动光标，光标会自动显示到当前页面内容中）  
  `C-v`: 下翻页，屏幕内容为一页  
  `M-v`: 上翻页，屏幕内容为一页  
  `C-l`: 重绘屏幕，光标所在行移动至屏幕中央，两次键入光标行移到屏幕首行  
- 上下左右  
  `C-p/n/b/f` ( previous/next/backward/forward )  
- 词句  
  `M-b/f` 光标向前 / 向后移动一个词的量  
  `M-a/e` 光标移动到句首 / 句尾  
- 行间  
  `C-a/e` 光标移动到行首 / 行尾  
- 内容  
  `M-</>` 光标移动到所有文字最开头 / 最末尾（ `<` 使用 `shift` 写出） == `M-shift-,/.`


#### 编辑内容

- 删除 `DEL` == `Backspace`
  - `Del` : 删除光标前的一个字符  
  - `C-d` : 删除光标后的一个字符 `Delete`  
  - `M-<DEL>` : 移除光标后的一个词  
  - `M-d` : 移除光标前的一个词  
  - `C-k` : 移除光标到行尾的字符  
  - `M-k` : 移除光标到句尾的字符  
- 删除（ delete ）和移除（ kill ）  
  - 移除：内容会被 Emacs 记录，并可以找回，重新插入移除的内容称为召回（ yank ），但一些空白内容或单字符不会被保存  
  - 删除：内容被 Emacs 抛弃，不能被找回，可能还在内存，撤销删除命令可以找回内容，`DEL` 和 `C-d` 有前缀参数改为移除  
- 选中删除  
  `C-<SPC>` == `C-@` 后移动光标 `C-w` : 移除选择的内容  
- 召回  
  - `C-y` : 召回最后移除的内容  
  - `M-y` : 召回前一次移除的内容，在 `C-y` 后使用，可以连续前翻移除的内容（会更换召回的内容，即只有一次的移除内容被召回在光标处）  
- 撤销 undo  
  - `C-/` : 消除一个命令造成的改变  
  - 例外，没有改变内容的命令不算  
  - `C-/` == `C-_` / `C-x u`  
- 替换 replace  
  - `M-x repl s` : `Return` 被替换的内容 `Return` 替换的内容  

#### 文件

- 文件  
  - `C-x C-f` : 命令后键入要查找的文件名，当文件不存在时创建文件  
  - `C-x C-s` : 存盘，保存缓冲区到文件  
  - 
- 缓冲区 buffers  
  - `C-x C-f` : 会新开缓冲区  
  - `C-x C-b` : 列出缓冲区  
  - `C-x b` : 切换缓冲区，命令后键入目标缓冲区（如文件名）  
  - `C-x s` : 保存所有缓冲区  
- 自动保存  
  - Emacs 会自动为编辑中的文件创建自动保存文件，以 `#<filename>#` 为名  
  - `M-x recover file` : 从自动保存文件中恢复内容  
  - 自动保存文件在正常存盘后被删除  

#### 编辑模式

- 切换编辑模式
  - `M-x` : 命令后键入模式名  
  - `C-h m` : 查看当前缓冲区主模式的文档  
